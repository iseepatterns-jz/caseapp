/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts ==============================
platform darwin -- Python 3.13.1, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend
configfile: pytest.ini
plugins: langsmith-0.3.3, anyio-4.8.0, asyncio-1.3.0, hypothesis-6.150.0, typeguard-2.13.3
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 42 items

tests/test_integration_complete_workflow_fixed.py ......                 [ 14%]
tests/test_integration_complete_workflow.py ........                     [ 33%]
tests/test_integration_minimal.py .......                                [ 50%]
tests/test_integration_simple.py .....FF.F.F                             [ 76%]
tests/test_ci_basic.py ..........                                        [100%]

=================================== FAILURES ===================================
______________ TestCoreIntegration.test_financial_analysis_basic _______________

self = <tests.test_integration_simple.TestCoreIntegration object at 0x114c26690>
mock_db_session = <AsyncMock id='4653685056'>

    def test_financial_analysis_basic(self, mock_db_session):
        """Test financial analysis service basics with mocked database"""
        async def run_test():
            from services.financial_analysis_service import FinancialAnalysisService
            from models.financial_analysis import TransactionType
    
            financial_service = FinancialAnalysisService(mock_db_session)
    
            # Mock transaction data for get_case_summary
            mock_db_session.execute.return_value.scalar.side_effect = [1, 5, 2] # accounts, transactions, alerts
    
            # Mock results for more complex queries
            mock_result = MagicMock()
            mock_result.scalar.return_value = 1000.0
            mock_result.all.return_value = [("Unknown", 500.0)]
            mock_db_session.execute.return_value = mock_result
    
            summary = await financial_service.get_case_summary(uuid.uuid4())
    
            assert "total_accounts" in summary
            assert "total_transactions" in summary
            assert "total_alerts" in summary
            assert summary["total_transactions"] >= 0
    
            return True
    
>       result = asyncio.run(run_test())

tests/test_integration_simple.py:171: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:194: in run
    return runner.run(main)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py:720: in run_until_complete
    return future.result()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def run_test():
        from services.financial_analysis_service import FinancialAnalysisService
        from models.financial_analysis import TransactionType
    
        financial_service = FinancialAnalysisService(mock_db_session)
    
        # Mock transaction data for get_case_summary
        mock_db_session.execute.return_value.scalar.side_effect = [1, 5, 2] # accounts, transactions, alerts
    
        # Mock results for more complex queries
        mock_result = MagicMock()
        mock_result.scalar.return_value = 1000.0
        mock_result.all.return_value = [("Unknown", 500.0)]
        mock_db_session.execute.return_value = mock_result
    
>       summary = await financial_service.get_case_summary(uuid.uuid4())
E       NameError: name 'uuid' is not defined. Did you forget to import 'uuid'?

tests/test_integration_simple.py:162: NameError
_____________ TestCoreIntegration.test_case_service_mock_workflow ______________

self = <tests.test_integration_simple.TestCoreIntegration object at 0x114c267a0>
mock_db_session = <AsyncMock id='4664484800'>

    def test_case_service_mock_workflow(self, mock_db_session):
        """Test case service with mocked database"""
        async def run_test():
            case_service = CaseService()
    
            # Mock case creation
            mock_case = MagicMock()
            mock_case.id = "case-123"
            mock_case.case_number = "TEST-001"
            mock_case.title = "Test Case"
            mock_case.status = "active"
    
            mock_db_session.scalar.return_value = mock_case
    
            with patch('services.case_service.get_db', return_value=mock_db_session):
                created_case = await case_service.create_case(
                    case_data={
                        "case_number": "TEST-001",
                        "title": "Test Case",
                        "description": "Test Description",
                        "case_type": "civil"
                    },
                    user_id="user-123",
                    db=mock_db_session
                )
    
            # Verify case creation
            assert created_case is not None
            assert created_case.case_number == "TEST-001"
    
            return True
    
>       result = asyncio.run(run_test())

tests/test_integration_simple.py:206: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:194: in run
    return runner.run(main)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py:720: in run_until_complete
    return future.result()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def run_test():
>       case_service = CaseService()
E       TypeError: CaseService.__init__() missing 2 required positional arguments: 'db' and 'audit_service'

tests/test_integration_simple.py:177: TypeError
______________ TestServiceIntegration.test_service_instantiation _______________

self = <tests.test_integration_simple.TestServiceIntegration object at 0x114cd82d0>

    def test_service_instantiation(self):
        """Test that all core services can be instantiated"""
        services = [
            CaseService,
            DocumentService,
            TimelineService,
            BackgroundJobService,
            WebhookService,
            SecurityService,
            HealthService
        ]
    
        for service_class in services:
            try:
>               service = service_class()
E               TypeError: CaseService.__init__() missing 2 required positional arguments: 'db' and 'audit_service'

tests/test_integration_simple.py:246: TypeError

During handling of the above exception, another exception occurred:

self = <tests.test_integration_simple.TestServiceIntegration object at 0x114cd82d0>

    def test_service_instantiation(self):
        """Test that all core services can be instantiated"""
        services = [
            CaseService,
            DocumentService,
            TimelineService,
            BackgroundJobService,
            WebhookService,
            SecurityService,
            HealthService
        ]
    
        for service_class in services:
            try:
                service = service_class()
                assert service is not None
            except Exception as e:
>               pytest.fail(f"Failed to instantiate {service_class.__name__}: {str(e)}")
E               Failed: Failed to instantiate CaseService: CaseService.__init__() missing 2 required positional arguments: 'db' and 'audit_service'

tests/test_integration_simple.py:249: Failed
______ TestServiceIntegration.test_background_job_and_webhook_integration ______

self = <tests.test_integration_simple.TestServiceIntegration object at 0x114bef5c0>

    def test_background_job_and_webhook_integration(self):
        """Test background job and webhook services work together"""
        async def run_test():
            job_service = BackgroundJobService()
            webhook_service = WebhookService()
    
            # Create webhook endpoint
            endpoint = await webhook_service.create_endpoint(
                name="job_notifications",
                url="https://example.com/job-webhook",
                events=[webhook_service.WebhookEvent.JOB_COMPLETED]
            )
    
            # Submit job
            job_id = await job_service.submit_job(
                task_name="test_integration",
                args=["test"]
            )
    
            # Send webhook notification
            delivery_ids = await webhook_service.send_webhook(
                event_type=webhook_service.WebhookEvent.JOB_COMPLETED,
                payload={"job_id": job_id, "status": "completed"}
            )
    
            # Verify integration
            assert endpoint is not None
            assert job_id is not None
            assert len(delivery_ids) > 0
    
            return True
    
>       result = asyncio.run(run_test())

tests/test_integration_simple.py:293: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:194: in run
    return runner.run(main)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py:720: in run_until_complete
    return future.result()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def run_test():
        job_service = BackgroundJobService()
        webhook_service = WebhookService()
    
        # Create webhook endpoint
        endpoint = await webhook_service.create_endpoint(
            name="job_notifications",
            url="https://example.com/job-webhook",
>           events=[webhook_service.WebhookEvent.JOB_COMPLETED]
        )
E       AttributeError: 'WebhookService' object has no attribute 'WebhookEvent'

tests/test_integration_simple.py:271: AttributeError
=============================== warnings summary ===============================
../../../../../../Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:295: 15 warnings
  /Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/pydantic/_internal/_config.py:295: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

core/database.py:210
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/core/database.py:210: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

schemas/case.py:69
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/case.py:69: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('closure_reason')

schemas/timeline.py:53
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/timeline.py:53: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('end_date')

schemas/media.py:83
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:83: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('tags', 'categories')

schemas/media.py:89
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:89: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('privilege_reason')

schemas/media.py:113
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:113: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('tags', 'categories')

schemas/media.py:119
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:119: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('admissibility_status')

schemas/media.py:143
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:143: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('admissibility_status')

schemas/media.py:162
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:162: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('annotation_type')

schemas/media.py:169
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:169: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('color')

schemas/media.py:175
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:175: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('opacity')

schemas/media.py:181
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:181: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('relevance_score')

schemas/media.py:187
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:187: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('end_time')

schemas/media.py:206
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:206: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('color')

schemas/media.py:212
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:212: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('opacity')

schemas/media.py:218
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:218: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('relevance_score')

schemas/media.py:375
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:375: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('analysis_types')

schemas/media.py:383
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/schemas/media.py:383: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    @validator('priority')

tests/test_integration_complete_workflow_fixed.py: 5 warnings
tests/test_integration_complete_workflow.py: 1 warning
tests/test_integration_minimal.py: 3 warnings
tests/test_integration_simple.py: 1 warning
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:135: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow(),

tests/test_integration_complete_workflow_fixed.py: 5 warnings
tests/test_integration_complete_workflow.py: 1 warning
tests/test_integration_minimal.py: 3 warnings
tests/test_integration_simple.py: 1 warning
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:136: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    updated_at=datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py: 6 warnings
tests/test_integration_complete_workflow.py: 1 warning
tests/test_integration_minimal.py: 5 warnings
tests/test_integration_simple.py: 1 warning
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/background_job_service.py:137: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow(),

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_case_creation_workflow
  /Users/showboat/locker/ISEEPATTERNS-2026-LOCKER/caseapp/backend/tests/test_integration_complete_workflow_fixed.py:62: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_case_creation_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_cross_service_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_background_job_and_webhook_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:316: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_case_creation_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_cross_service_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_background_job_and_webhook_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:326: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    created_at=datetime.utcnow(),

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_case_creation_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_cross_service_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_background_job_and_webhook_integration
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:327: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    scheduled_at=datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_security_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/security_service.py:217: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "setup_timestamp": datetime.utcnow().isoformat()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_security_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/security_service.py:293: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "created_at": datetime.utcnow().isoformat()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_security_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/core/auth.py:44: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + expires_delta

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_security_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/security_service.py:444: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_background_job_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/background_job_service.py:212: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    job.completed_at = datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_background_job_workflow
tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_background_job_workflow
tests/test_integration_minimal.py::TestMinimalIntegration::test_job_statistics
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/background_job_service.py:270: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_time = datetime.utcnow() - timedelta(hours=hours)

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_minimal.py::TestMinimalIntegration::test_webhook_delivery_statistics
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:538: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_time = datetime.utcnow() - timedelta(hours=hours)

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_webhook_delivery_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/webhook_service.py:199: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    endpoint.updated_at = datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/security_service.py:151: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/test_integration_complete_workflow_fixed.py::TestCompleteWorkflowIntegration::test_error_handling_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/security_service.py:130: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    if datetime.utcnow() < lockout_time + lockout_duration:

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/tests/test_integration_complete_workflow.py:107: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_case.created_at = datetime.utcnow()

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/document_service.py:102: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    unique_filename = f"{datetime.utcnow().strftime('%Y/%m/%d')}/{uuid.uuid4().hex}/{file_hash[:8]}{file_extension}"

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/document_service.py:116: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    'upload_timestamp': datetime.utcnow().isoformat()

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/tests/test_integration_complete_workflow.py:186: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    mock_event.event_date = datetime.utcnow()

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/tests/test_integration_complete_workflow.py:204: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    event_date=datetime.utcnow(),

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_complete_case_creation_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/case_insight_service.py:113: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    'generated_at': datetime.utcnow().isoformat(),

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_forensic_analysis_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/export_service.py:375: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    story.append(Paragraph(f"Generated: {datetime.utcnow().strftime('%Y-%m-%d %H:%M UTC')}", styles['Normal']))

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_security_workflow
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/encryption_service.py:65: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    'encrypted_at': datetime.utcnow().isoformat(),

tests/test_integration_complete_workflow.py: 45 warnings
tests/test_integration_simple.py: 38 warnings
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/health_service.py:46: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self.timestamp = datetime.utcnow()

tests/test_integration_complete_workflow.py::TestCompleteWorkflows::test_service_manager_workflow
tests/test_integration_complete_workflow.py::TestErrorHandlingAndRecovery::test_service_failure_recovery
tests/test_integration_simple.py::TestCoreIntegration::test_health_service_basic_check
tests/test_integration_simple.py::TestCoreIntegration::test_service_error_handling
  /Users/showboat/locker/AGRAV-ISEEPATTERNS/caseapp/backend/services/health_service.py:95: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_integration_simple.py::TestCoreIntegration::test_financial_analysis_basic
FAILED tests/test_integration_simple.py::TestCoreIntegration::test_case_service_mock_workflow
FAILED tests/test_integration_simple.py::TestServiceIntegration::test_service_instantiation
FAILED tests/test_integration_simple.py::TestServiceIntegration::test_background_job_and_webhook_integration
================== 4 failed, 38 passed, 202 warnings in 3.66s ==================
